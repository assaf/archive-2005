<html>
<head>
  <title>assert_select cheat sheet</title>
  <style>
body {
  background: white;
  font-family: Candara, Trebuchet, "Lucida Grande", Arial, Helvetica, sans-serif;
  text-align: left;
  margin: 2em;
}
h1 {
  background: #a01010;
  color: white;
  padding: 0 0.5em 0.3em 0.5em;
  font-size: 2em;
  margin: 0;
}
h1.printed {
  display: none;
}
h2 {
  color: #797b7d;
}
dl dt {
  font-weight: bold;
}
dl dd {
  margin: 0 0 1.5em 2em;
}
dl.selectors dt, dl.options dt {
  float: left;
  clear: both;
  display: inline;
  width: 15em;
  margin: 0;
  font-weight: normal;
  font-family: Consolas, "Courier New";
}
dl.selectors dd, dl.options dd {
  margin: 0 0 0.3em 15em;
}
code, pre {
  font-family: Consolas, "Courier New";
}
pre {
  font-weight: bold;
}
p.copyright {
  text-align: center;
  font-weight: bold;
  margin-top: 2em;
}
@media print {
  body {
    margin: 0 1cm 0 1cm;
  }
  h1 {
    padding: 0.3cm;
    font-size: 200%;
    margin: 0.5cm 0 0 0;
  }
  h1.printed {
    display: block;
  }
  .break-here {
    page-break-before: always;
  }
  dl dd {
    margin: 0 0 0.6cm 1cm;
  }
  dl.selectors dt, dl.options dt {
    width: 6cm;
  }
  dl.selectors dd, dl.options dd {
    margin: 0 0 0.2cm 6cm;
  }
  p.copyright {
    margin-top: 1cm;
  }
}
  </style>
</head>
<body>
<h1>assert_select cheat sheet</h1>
<h2>Selectors</h2>
<dl class="selectors">
  <dt>*</dt><dd>any element</dd>
  <dt>E</dt><dd>an element of type E</dd>
  <dt>E.warning</dt><dd>an E element whose class is "warning" (the document language specifies how class is determined).</dd>
  <dt>E#myid</dt><dd>an E element with ID equal to "myid".</dd>
  <dt>E[foo]</dt><dd>an E element with a "foo" attribute</dd>
  <dt>E[foo="bar"]</dt><dd>an E element whose "foo" attribute value is exactly equal to "bar"</dd>
  <dt>E[foo~="bar"]</dt><dd>an E element whose "foo" attribute value is a list of space-separated values, one of which is exactly equal to "bar"</dd>
  <dt>E[foo^="bar"]</dt><dd>an E element whose "foo" attribute value begins exactly with the string "bar"</dd>
  <dt>E[foo$="bar"]</dt><dd>an E element whose "foo" attribute value ends exactly with the string "bar"</dd>
  <dt>E[foo*="bar"]</dt><dd>an E element whose "foo" attribute value contains the substring "bar"</dd>
  <dt>E[hreflang|="en"]</dt><dd>an E element whose "hreflang" attribute has a hyphen-separated list of values beginning (from the left) with "en"</dd>
  <dt>E:root</dt><dd>an E element, root of the document</dd>
  <dt>E:nth-child(n)</dt><dd>an E element, the n-th child of its parent</dd>
  <dt>E:nth-last-child(n)</dt><dd>an E element, the n-th child of its parent, counting from the last one</dd>
  <dt>E:nth-of-type(n)</dt><dd>an E element, the n-th sibling of its type</dd>
  <dt>E:nth-last-of-type(n)</dt><dd>an E element, the n-th sibling of its type, counting from the last one</dd>
  <dt>E:first-child</dt><dd>an E element, first child of its parent</dd>
  <dt>E:last-child</dt><dd>an E element, last child of its parent</dd>
  <dt>E:first-of-type</dt><dd>an E element, first sibling of its type</dd>
  <dt>E:last-of-type</dt><dd>an E element, last sibling of its type</dd>
  <dt>E:only-child</dt><dd>an E element, only child of its parent</dd>
  <dt>E:only-of-type</dt><dd>an E element, only sibling of its type</dd>
  <dt>E:empty</dt><dd>an E element that has no children (including text nodes)</dd>
  <dt>E:not(s)</dt><dd>an E element that does not match simple selector s</dd>
  <dt>E F</dt><dd>an F element descendant of an E element</dd>
  <dt>E > F</dt><dd>an F element child of an E element</dd>
  <dt>E + F</dt><dd>an F element immediately preceded by an E element</dd>
  <dt>E ~ F</dt><dd>an F element preceded by an E element</dd>
</dl>
<br class="break-here"/>
<h1 class="printed">assert_select cheat sheet</h1>
<h2>Methods</h2>
<dl>
<dt><pre>
assert_select(selector, *values, equality?, message?) { |elems| ... }
assert_select(element, selector, *values, equality?, message?) { |elems| ... }
</pre></dt>
<dd>
  <p>Uses <code>selector</code> to select elements from response page or first argument (<code>element</code>), and evalute <code>equality</code> test. Raises exception with <code>message</code> if equality test fails.</p>
  <p>Equality tests include:</p>
  <dl class="options">
    <dt>true</dt><dd>At least one element found (<code>:minimum=>1</code>)</dd>
    <dt>false</dt><dd>No element found (<code>:count=>0</code>)</dd>
    <dt>text, :text=>text</dt><dd>All elements found have the text contents (string or regexp)</dd>
    <dt>n, :count=>n</dt><dd>Exactly n elements found</dd>
    <dt>:minimum=>n</dt><dd>At least n elements found</dd>
    <dt>:maximum=>n</dt><dd>At most n elements found</dd>
    <dt>n..m</dt><dd>Between n and m elements found</dd>
  </dl>
  <p>If no count specified, <code>:minimum=>1</code> assumed.</p>
  <p>With block, calls block with all selected elements. Calling <code>assert_select</code> (or any of the other functions) within that block will select from the element selected by the outer block.</p>
  <p>Subsitution values are string or regular expression, can be used for id, class name or attribute value, e.g. <code>"E[foo=?]", /bar/i</code>.</p>
</dd>
<dt><pre>
assert_select_rjs(id?) { |elems| ... }
assert_select_rjs(statement, id?) { |elems| ... }
assert_select_rjs(:insert, position, id?) { |elems| ... }
</pre></dt>
<dd>
  <p>Asserts that RJS statement updates/inserts HTML content and allows nested assertions on the content.</p>
  <p>With <code>id</code>, selects only RJS statement affecting elements with that id. With <code>statement</code>, RJS statements that <code>:replace</code>, <code>:replace_html</code> or <code>:insert</code>. With <code>:insert</code> can limit position (<code>:before</code>, <code>:after</code>, etc).</p>
</dd>
<dt><pre>
assert_select_email() { |elems| ... }
</pre></dt>
<dd>
  <p>Assertions on the (HTML) body of the delivered e-mail.</p>
</dd>
<dt><pre>
assert_select_encoded(element?) { |elems| ... }
</pre></dt>
<dd>
For operating on encoded HTML (e.g. RSS item description).
</dd>
<dt><pre>
css_select(selector, *values) => array
css_select(element, selector, *values) => array
</pre></dt>
<dd>
  <p>Returns an array with selected elements (empty if no elements selected).</p>
</dd>
<p class="copyright">&copy; 2006 Assaf Arkin <a href="http://labnotes.org">http://labnotes.org</a><br/>Released under Creative Commons Attribution</p>
</body></html>
